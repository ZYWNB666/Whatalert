# Whatalert ç›‘æ§å‘Šè­¦ç³»ç»Ÿ

<div align="center">

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¤šç§Ÿæˆ·ç›‘æ§å‘Šè­¦ç³»ç»Ÿï¼Œæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå…¼å®¹ Prometheus æŸ¥è¯¢è¯­æ³•ã€‚

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![Vue](https://img.shields.io/badge/Vue-3.x-brightgreen.svg)](https://vuejs.org/)
[![Docker](https://img.shields.io/badge/Docker-ready-blue.svg)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å‘Šè­¦ç®¡ç†
- **çµæ´»çš„å‘Šè­¦è§„åˆ™** - æ”¯æŒ PromQL æŸ¥è¯¢è¯­æ³•
- **æ™ºèƒ½åˆ†ç»„** - ç±»ä¼¼ Alertmanager çš„å‘Šè­¦èšåˆ
- **å¤šçº§è·¯ç”±** - æ”¯æŒå¤æ‚çš„å‘Šè­¦è·¯ç”±ç­–ç•¥
- **å‘Šè­¦é™é»˜** - çµæ´»çš„é™é»˜è§„åˆ™é…ç½®

### ğŸ”” é€šçŸ¥æ¸ é“
- **å¤šæ¸ é“æ”¯æŒ** - é£ä¹¦ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ã€é‚®ä»¶ã€Webhook
- **æ‰¹é‡é€šçŸ¥** - æ”¯æŒå‘Šè­¦åˆå¹¶å‘é€
- **é€šçŸ¥æ¨¡æ¿** - è‡ªå®šä¹‰é€šçŸ¥å†…å®¹
- **é€šçŸ¥è¿‡æ»¤** - åŸºäºæ ‡ç­¾çš„æ™ºèƒ½è¿‡æ»¤

### ğŸ¢ å¤šç§Ÿæˆ·æ¶æ„
- **ç§Ÿæˆ·éš”ç¦»** - å®Œæ•´çš„å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- **RBACæƒé™** - ç»†ç²’åº¦çš„æƒé™æ§åˆ¶
- **ç‹¬ç«‹é…ç½®** - æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹çš„å‘Šè­¦ç­–ç•¥

### ğŸš€ åˆ†å¸ƒå¼éƒ¨ç½²
- **Redis æ”¯æŒ** - åˆ†å¸ƒå¼é”å’Œä¼šè¯ç®¡ç†
- **æ°´å¹³æ‰©å±•** - æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²
- **é«˜å¯ç”¨** - è‡ªåŠ¨æ•…éšœè½¬ç§»
- **è´Ÿè½½å‡è¡¡** - æ”¯æŒ Kubernetes HPA

### ğŸ“Š ç›‘æ§æ•°æ®æº
- **Prometheus** - åŸç”Ÿæ”¯æŒ
- **VictoriaMetrics** - å…¼å®¹
- **å¤šæ•°æ®æº** - æ”¯æŒé…ç½®å¤šä¸ªæ•°æ®æº
- **è‡ªå®šä¹‰æ ‡ç­¾** - æ•°æ®æºçº§åˆ«çš„æ ‡ç­¾æ³¨å…¥

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Web ç•Œé¢ (Vue 3)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API æœåŠ¡ (FastAPI)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è§„åˆ™è¯„ä¼°å™¨   â”‚  â”‚ å‘Šè­¦ç®¡ç†å™¨    â”‚  â”‚ é€šçŸ¥æœåŠ¡      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚                â”‚
           â–¼                    â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Prometheus â”‚        â”‚  Redis   â”‚    â”‚ é€šçŸ¥æ¸ é“      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  MySQL   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ å¿«é€Ÿéƒ¨ç½²

### Docker Composeï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰

```bash
# å…‹éš†ä»£ç 
git clone <your-repo>
cd Whatalert/alert_system

# é…ç½®
cp config/config.example.yaml config/config.yaml
# ç¼–è¾‘ config.yaml é…ç½®æ•°æ®åº“å’ŒRedis

# å¯åŠ¨
docker-compose up -d

# è®¿é—®
open http://localhost
```

**é»˜è®¤è´¦å·**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

### Kubernetes éƒ¨ç½²

è¯¦ç»†éƒ¨ç½²æ­¥éª¤è¯·æŸ¥çœ‹ï¼š**[Docker & Kubernetes éƒ¨ç½²æŒ‡å—](DOCKER_DEPLOYMENT.md)**

```bash
# å¿«é€Ÿéƒ¨ç½²
kubectl create namespace whatalert
kubectl create secret generic whatalert-secret \
  --from-literal=mysql-root-password='YourPassword' \
  --from-literal=redis-password='YourRedisPassword' \
  --from-literal=jwt-secret='YourJWTSecret' \
  -n whatalert

kubectl apply -f k8s/
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
alert_system/
â”œâ”€â”€ app/                      # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ api/                  # API è·¯ç”±
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒåŠŸèƒ½ï¼ˆé”ã€ä¼šè¯ï¼‰
â”‚   â”œâ”€â”€ db/                   # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/             # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ main.py               # åº”ç”¨å…¥å£
â”œâ”€â”€ web/                      # å‰ç«¯åº”ç”¨ï¼ˆVue 3ï¼‰
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml           # ä¸»é…ç½®
â”‚   â””â”€â”€ config.example.yaml   # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ scripts/                  # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ init_database.sql     # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ clear_database.sql    # æ¸…ç©ºæ•°æ®åº“
â”‚   â””â”€â”€ *.py                  # ç®¡ç†è„šæœ¬
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”œâ”€â”€ Dockerfile                # åç«¯é•œåƒ
â”œâ”€â”€ docker-compose.yml        # Composeé…ç½®
â””â”€â”€ requirements.txt          # Pythonä¾èµ–
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### config.yaml

```yaml
# MySQL æ•°æ®åº“é…ç½®
database:
  host: "mysql"
  port: 3306
  username: "root"
  password: "your-password"
  database: "whatalert"

# Redis é…ç½®ï¼ˆåˆ†å¸ƒå¼éƒ¨ç½²å¿…éœ€ï¼‰
redis:
  host: "redis"
  port: 6379
  password: "your-password"
  db: 0

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
```

---

## ğŸ“š æ–‡æ¡£

- **[æ¶æ„è®¾è®¡](docs/ARCHITECTURE.md)** - ç³»ç»Ÿæ¶æ„å’Œè®¾è®¡ç†å¿µ
- **[åŠŸèƒ½åˆ—è¡¨](docs/FEATURES.md)** - å®Œæ•´åŠŸèƒ½æ¸…å•
- **[APIä½¿ç”¨æŒ‡å—](docs/USAGE.md)** - APIæ¥å£è¯´æ˜
- **[æƒé™è¯´æ˜](docs/PERMISSIONS.md)** - RBACæƒé™ä½“ç³»
- **[å‘Šè­¦åˆ†ç»„æŒ‡å—](docs/alert_grouping_guide.md)** - å‘Šè­¦åˆ†ç»„é…ç½®
- **[Redisé›†æˆ](docs/redis_integration.md)** - RedisåŠŸèƒ½è¯´æ˜
- **[éƒ¨ç½²æŒ‡å—](DOCKER_DEPLOYMENT.md)** - Docker & K8séƒ¨ç½²

---

## ğŸ› ï¸ ç®¡ç†å·¥å…·

### é‡ç½®ç®¡ç†å‘˜å¯†ç 

```bash
# Docker
docker exec -it whatalert-backend python scripts/reset_admin_password.py

# Kubernetes
kubectl exec -it deployment/whatalert-backend -n whatalert -- \
  python scripts/reset_admin_password.py
```

### åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ–¹å¼1ï¼šä½¿ç”¨SQL
mysql -u root -p whatalert < scripts/init_database.sql

# æ–¹å¼2ï¼šä½¿ç”¨Pythonè„šæœ¬
python scripts/init_db.py
```

### æ¸…ç©ºæ•°æ®åº“

```bash
mysql -u root -p whatalert < scripts/clear_database.sql
```

---

## ğŸ¨ åŠŸèƒ½æˆªå›¾

### ä»ªè¡¨æ¿
å®æ—¶å±•ç¤ºç³»ç»ŸçŠ¶æ€å’Œå‘Šè­¦ç»Ÿè®¡

### å½“å‰å‘Šè­¦
æŒ‰è§„åˆ™åˆ†ç»„æ˜¾ç¤ºæ´»è·ƒå‘Šè­¦ï¼Œæ”¯æŒæŠ˜å /å±•å¼€

### å†å²å‘Šè­¦
æŒ‰è§„åˆ™åˆ†ç»„æ˜¾ç¤ºå·²æ¢å¤çš„å‘Šè­¦ï¼Œå¯æŸ¥çœ‹æŒç»­æ—¶é—´

### å‘Šè­¦è§„åˆ™
ç®¡ç†å‘Šè­¦è§„åˆ™ï¼Œæ”¯æŒPromQLæŸ¥è¯¢

### é€šçŸ¥æ¸ é“
é…ç½®å¤šç§é€šçŸ¥æ¸ é“ï¼Œæ”¯æŒæ ‡ç­¾è¿‡æ»¤

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **JWTè®¤è¯** - åŸºäºTokençš„å®‰å…¨è®¤è¯
- **RBACæƒé™** - ç»†ç²’åº¦çš„æƒé™æ§åˆ¶
- **ç§Ÿæˆ·éš”ç¦»** - å®Œæ•´çš„æ•°æ®éš”ç¦»
- **å®¡è®¡æ—¥å¿—** - è®°å½•æ‰€æœ‰é‡è¦æ“ä½œ
- **å¯†ç åŠ å¯†** - BCryptåŠ å¯†å­˜å‚¨

---

## ğŸ“Š æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - ç°ä»£Python Webæ¡†æ¶
- **SQLAlchemy** - ORMæ¡†æ¶
- **MySQL** - å…³ç³»å‹æ•°æ®åº“
- **Redis** - ç¼“å­˜å’Œåˆ†å¸ƒå¼é”
- **Loguru** - æ—¥å¿—æ¡†æ¶

### å‰ç«¯
- **Vue 3** - æ¸è¿›å¼JavaScriptæ¡†æ¶
- **Element Plus** - UIç»„ä»¶åº“
- **Vite** - æ„å»ºå·¥å…·
- **Pinia** - çŠ¶æ€ç®¡ç†

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ“ è”ç³»æ–¹å¼

- **Issues**: [GitHub Issues](https://github.com/your-repo/issues)
- **Email**: your-email@example.com

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**

</div>
